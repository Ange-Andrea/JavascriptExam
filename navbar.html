<script src="assets/js/login.js"></script>


<div class="w3-top">
  <div class="w3-bar w3-black w3-card">
    <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right" href="javascript:void(0)"
      onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a href="index.html" class="w3-bar-item w3-button w3-padding-large">ACCUEIL</a>
    <img src="p.png" style="height: 50px;"/>
    <a href="essaie.html" class="w3-padding-large w3-hover-red w3-hide-small w3-right"><i class="fa fa-search"></i></a>
    <a href="javascript:void(0)" class="w3-padding-large w3-hover-red w3-hide-small w3-right"
      onclick="document.getElementById('id01').style.display='block'" style="width:auto;"><i
        class="fa fa-user-circle "></i></a>

    <div id="id01" class="modal">

      <form class="modal-content animate">
        <div class="imgcontainer">
          <span onclick="document.getElementById('id01').style.display='none'" class="close"
            title="Close Modal">&times;</span>
        </div>
        <h1 style="color: black; text-align:center;"> LOGIN </h1>

        <div class="container">
          <label for="uname"><b>Username</b></label>
          <input type="text" id="username" placeholder="Enter Username" name="uname" required>

          <label for="psw"><b>Password</b></label>
          <input type="password" id="password" placeholder="Enter Password" name="psw" required>
          <label style="color: black;">
            <input type="checkbox" checked="checked" name="remember"> Remember me
          </label>

          <button type="button" id="btnLogin">Login</button>
        </div>

        <div class="container" style="background-color:#f1f1f1">
          <button type="button" onclick="document.getElementById('id01').style.display='none'"
            class="cancelbtn">Cancel</button>
          <span class="psw">Forgot <a href="#">password?</a></span>
        </div>
      </form>
    </div>

  </div>
</div>

<script type="module">
  import { login } from "../utils/tmdb-api-rest.js"

  const btnLogin = document.getElementById("btnLogin");


  function initLogin() {
    const username = document.getElementById("username");
    const password = document.getElementById("password");
    if (!username.value) {
      alert("fill username");
      return
    }
    if (!password.value) {
      alert("fill password");
      return;
    }
    const loginData = {
      password: password.value,
      username: username.value
    }

    login(loginData).then(sessionData => {
      console.log(sessionData);
    });

    btnLogin.addEventListener("click", initLogin);

  }
</script>